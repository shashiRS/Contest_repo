"""
    Copyright Continental Corporation and subsidiaries. All rights reserved.

    :platform: Windows and Linux

    :synopsis:
        This module contains functions for some common use cases that will be useful for various tools.
"""

from contest_core.global_params import is_contest_gui_running
import tkinter as tk
from tkinter import ttk
import webbrowser


def open_url(url_link: str, tk_obj: tk.Tk) -> None:
    """
    Function to open an url in default web-browser.

    :param str url_link: url link to open.
    :param tk.Tk tk_obj: object of Tk class used.
    """
    webbrowser.open_new(url_link)
    tk_obj.destroy()


def log_backward_compatibility_prints(lib_name: str) -> None:
    """
    Function to print information about changing old imports for python libs to new import template.

    :param str lib_name: contest python library name.
    """
    url_link = f"https://github-am.geo.conti.de/pages/ADAS/contest_tools_utils/libs/{lib_name}/usage.html"
    ui_info = f"\nCheck new usage by clicking on 'Check {lib_name} New Import Usage'\n"
    non_ui_info = (f"Please use new way of importing:\n"
                   f"Check check new usage at {url_link}\n\n")
    msg = (f"\n{'=' * 50} PLEASE READ BELOW CAREFULLY {'=' * 50}\n\n"
           f"Please note that you're importing '{lib_name}' in old way i.e. 'from ptf.tools_utils ...'\n"
           f"{ui_info if is_contest_gui_running() else non_ui_info}\n\n"
           f"==>> PLEASE MAKE CHANGES WHERE-EVER NECESSARY & CONTACT CONTEST TEAM IN-CASE OF HELP !\n\n"
           f"==>> THIS BACKWARD COMPATIBILITY SUPPORT WILL BE REMOVED IN NEWER VERSIONS OF CONTEST TOOL\n\n"
           f"{'=' * 50} PLEASE READ ABOVE CAREFULLY {'=' * 50}\n")
    if not is_contest_gui_running():
        print(msg)
    else:
        tk_obj = tk.Tk()
        tk_obj.wm_title("IMPORTANT MESSAGE")
        label = ttk.Label(tk_obj, text=msg)
        label.pack(side="top", fill="x", pady=10)
        info_button = tk.Button(
            tk_obj,
            text=f"Check {lib_name} New Import Usage",
            bg="yellow",
            command=lambda: open_url(url_link, tk_obj)
        )
        info_button.pack()
        info_button.mainloop()
