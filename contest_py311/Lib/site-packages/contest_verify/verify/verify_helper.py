"""
    Copyright Continental Corporation and subsidiaries. All rights reserved.

    :platform: Windows, Linux

    :synopsis:
        File containing helper functions for verification utilities
"""

# standard Python imports
import traceback


def add_pytest_caller_info(error_str):
    """
    Function for adding traceback information in error string.

    The traceback information is added to error string only if a .pytest file is found in
    traceback stack.

    :param string error_str: Error string in which .pytest file traceback info can be added

    :return: Error string
    :rtype: string
    """
    location = {"pytest_file": None, "line": None}
    # loop for getting information regarding traceback stack
    for line in traceback.format_stack():
        # if .pytest file found in traceback then get file and line number
        if '.pytest' in line:
            location["pytest_file"] = line.split(",")[0]
            location["line"] = line.split(",")[1]
    # if .pytest file found in traceback then update error string with that information
    if location["pytest_file"] and location["line"]:
        error_str = "{} \n\t-->{}{}".format(
            error_str, location["pytest_file"], location["line"])
    # throw back error string
    return error_str
