"""
    Copyright 2019 Continental Corporation

    :file: swt_pico_3000a_test.pytest
    :platform: Windows
    :synopsis:
        Sample test(s) for PS3000A device

    :author:
        - M. Shan Ur Rehman <Muhammad.Shan.ur.Rehman@continental-corporation.com>
"""


# standard Python import area
import os
import numpy as np

# ConTest or custom import area
# NOTE : ALWAYS IMPORT (contest_expects, contest_asserts, report and get_parameter) AS BELOW.
#        FOR PROPER DOCUMENTATION AND ERROR REPORTING
from contest_verify.verify import contest_asserts
from contest_verify.verify import contest_expects
from ptf.ptf_utils.report import DETAILS, PRECONDITION, VERIFIES, TESTTAG, TESTSTEP, EXPECTED, TESTCASE
from ptf.ptf_utils.global_params import get_parameter


def SWT_SAMPLE_TESTv1():
    DETAILS("Sample test case for recording data from a digital port on PS3000A compatible device")
    DETAILS("This test case was executed on PicoScope 3205MSO device")
    DETAILS("Data from a digital channel will be recorded for some seconds")

    PRECONDITION("Fill in precondition")

    VERIFIES("L3_SW_CHECK_PICO")

    TESTTAG("hil")

    TESTCASE()

    digital_channel = 0
    logic_level = 1.5
    time_out = 10.0

    TESTSTEP("Grabbing picoscope object created in global setup")
    EXPECTED("Object grabbed")
    pico_app = get_parameter("pico_app")

    TESTSTEP("Recording data from digital channel 0 for 10 seconds keeping logic level as 1.5")
    EXPECTED("Data read successfully from digital channel 0")
    channel_values = np.array(pico_app.record_digital_port(digital_channel, logic_level, time_out))

    TESTSTEP("Printing channel values captured during sampling")
    print("\n\nTotal samples collected = ", channel_values.__len__())
    print("Digital Channel ", digital_channel, " values")
    print(channel_values)
