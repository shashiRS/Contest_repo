"""
    Copyright 2022 Continental Corporation

    This file contains up to four methods that will be called by the test framework:
        - global_setup(): Will be called before ALL test-cases
        - setup(): Will be called before EACH test-case
        - teardown(): Will be called after EACH test-case. Will also be called if test-case fails.
        - global_teardown(): Will be called after ALL test-cases.
                             Will be called if any execution before fails.

    :file: setup.pytest

    :author:
        - Ganga Prabhakar G <ganga.prabhakar.guntamukkala@continental-corporation.com>
"""


# standard Python import area


# ConTest or custom import area
# NOTE : ALWAYS IMPORT (contest_expects, contest_asserts and global_params) AS BELOW.
#        FOR PROPER ERROR REPORTING AND PARAMETER CONTROL
from ptf.ptf_utils.global_params import *
from ptf.tools_utils.relay_control import conrad_rly


def global_setup():
    """
    This method will be called before ALL testcases are executed.
    You can set global variables with :func:`set_global_parameter`.
    Will skip execution of tests if this method fails.
    """
    # IP and Port of RPC interface
    rpc_details = {'ip': '172.20.201.61', 'port': 32444}
    # creating object of ConradRlyCtrl based on `RPC` interface
    conrad_rpc = conrad_rly.ConradRlyCtrl(interface=rpc_details)

    # Initializing the interface.
    conrad_rpc.initialize()
    # assigning object to a global variable to be accessed later
    set_global_parameter("conrad_rpc", conrad_rpc)

def global_teardown():
    """
    This method will be called after ALL testcases are executed.
    Guaranteed to be called, even if any test or global setup fails.
    """
    conrad_relay = get_parameter("conrad_rpc")
    # Disconnecting device port.
    conrad_relay.disconnect()

def setup():
    """
    This method will be called before EACH testcase is executed.
    You can set global variables with :func:`set_global_parameter` and local variables just
    available for the next testcase using :func:`set_local_parameter`.
    Will skip execution of test if this method fails.
    Skipped if global setup fails.
    """
    pass

def teardown():
    """
    This method will be called after EACH testcase is executed.
    Guaranteed to be called, even if the test or setup fails.
    Skipped if global setup fails.
    """
    pass
