"""
    Copyright 2021 Continental Corporation

    :file: swt_sample_test.pytest
    :platform: Windows, Linux
    :synopsis:
        This file contains sample test(s) for the relay control APIs

    :author:
        - Ganga Prabhakar G <ganga.prabhakar.guntamukkala@continental-corporation.com>
"""


# standard Python import area


# ConTest or custom import area
# NOTE : ALWAYS IMPORT (contest_expects, contest_asserts, report and get_parameter) AS BELOW.
#        FOR PROPER DOCUMENTATION AND ERROR REPORTING
from contest_verify.verify import contest_asserts
from ptf.ptf_utils.report import DETAILS, PRECONDITION, VERIFIES, TESTTAG, TESTSTEP, EXPECTED, TESTCASE
from ptf.ptf_utils.global_params import get_parameter


def SWT_CONRAD_RELAY_ACTIVATIONv1():
    DETAILS("Demo test to show how to activate CONRAD Relays")
    PRECONDITION("Ensure the relay board is powered and interface connected properly")

    VERIFIES("activate_relays API")

    TESTTAG("hil")

    TESTCASE()

    TESTSTEP("Grabbing CONRAD Relay control variable created in global setup")
    EXPECTED("Variables grabbed")
    conrad_rly = get_parameter("conrad_relay")

    TESTSTEP("activating the relays according to mapping")
    EXPECTED("relays activated successfully")
    result = conrad_rly.activate_relays(0x21)
    print('resulted relay mapping is: ', result)


def SWT_CONRAD_RELAY_DEACTIVATIONv1():
    DETAILS("Demo test to show how to deactivate CONRAD Relays")
    PRECONDITION("Ensure the relay board is powered and interface connected properly")

    VERIFIES("deactivate_relays API")

    TESTTAG("hil")

    TESTCASE()

    TESTSTEP("Grabbing CONRAD Relay control variable created in global setup")
    EXPECTED("Variables grabbed")
    conrad_rly = get_parameter("conrad_relay")

    TESTSTEP("deactivating the relays according to mapping")
    EXPECTED("relays deactivated successfully")
    result = conrad_rly.deactivate_relays(0x20)
    print('resulted relay mapping is: ', result)


def SWT_CONRAD_RELAY_STATUSv1():
    DETAILS("Demo test to show how to read the CONRAD Relays status")
    PRECONDITION("Ensure the relay board is powered and interface connected properly")

    VERIFIES("relays_status API")

    TESTTAG("hil")

    TESTCASE()

    TESTSTEP("Grabbing CONRAD Relay control variable created in global setup")
    EXPECTED("Variables grabbed")
    conrad_rly = get_parameter("conrad_relay")

    TESTSTEP("Acquiring the relays status")
    EXPECTED("relays status acquired successfully")
    result = conrad_rly.relays_status()
    print('relay mapping is: ', result)

    TESTSTEP("Acquiring the relays status according to mapping")
    EXPECTED("relays status acquired successfully")
    result = conrad_rly.relays_status(0x20)
    print('relay mapping is: ', result)


def SWT_CONRAD_RELAY_RESETv1():
    DETAILS("Demo test to show how to reset the CONRAD Relays")
    PRECONDITION("Ensure the relay board is powered and interface connected properly")

    VERIFIES("reset_relays API")

    TESTTAG("hil")

    TESTCASE()

    TESTSTEP("Grabbing CONRAD Relay control variable created in global setup")
    EXPECTED("Variables grabbed")
    conrad_rly = get_parameter("conrad_relay")

    TESTSTEP("Resetting relays according to the given mapping")
    EXPECTED("relays are reset successfully")
    conrad_rly.reset_relays(relays=0x20, target_state="ON")
